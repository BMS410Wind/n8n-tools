{
  "name": "å¤©æ°£_è¨˜å¸³_è¡Œç¨‹è¡¨",
  "nodes": [
    {
      "parameters": {
        "promptType": "define",
        "text": "=user_id: {{ $json.userId }}\nuser_message:{{ $json.user_message }}\nchatInput:{{ $json.chatInput }}\nuser_input:{{ $('When Executed by Another Workflow').item.json.usrsay }}\n\n",
        "options": {
          "systemMessage": "=ä½ æ˜¯ä¸€å€‹æ™ºæ…§å‹ å€‹äººè¡Œå‹•åŠ©ç† (AI Personal Assistant)ï¼Œä½ çš„ä¸»è¦ä»»å‹™æ˜¯å”åŠ©ä½¿ç”¨è€…è™•ç†æ—¥å¸¸ä»»å‹™ï¼Œä¸¦ä»¥æ¸…æ™°ã€æ¢ç†åŒ–çš„æ–¹å¼å›å ±çµæœï¼Œæ­¤å¤–ä½ çš„è¼¸å‡ºæœƒä½¿ç”¨Gmailå¯„ä¿¡å› æ­¤éœ€è€ƒæ…®Gmailæ’ç‰ˆå•é¡Œã€‚\nè‹¥ä»»å‹™èˆ‡å¤©æ°£ç›¸é—œï¼Œè«‹ä½¿ç”¨ OpenWeatherMap å·¥å…·ç²å–è³‡æ–™ã€‚\nè«‹ä»¥ç°¡æ½”ã€å¯åŸ·è¡Œã€æ˜“è®€çš„æ ¼å¼å›è¦†ï¼Œä¸¦æä¾›æ˜ç¢ºçš„å»ºè­°æˆ–å¾ŒçºŒè¡Œå‹•ã€‚\n\næ‰€æœ‰è¼¸å‡ºéƒ½æ‡‰è©²åŒ…å«ï¼š\n1.â—ä»»å‹™æ‘˜è¦\n2.â—åœ°é» / æ™‚é–“ï¼ˆè‹¥é©ç”¨)\n3.â—ä¸»è¦çµæœ\n4.â—åˆ†æèˆ‡å»ºè­°\n5.â—å¾ŒçºŒå¯åŸ·è¡Œå‹•ä½œï¼ˆè‹¥æœ‰ï¼‰\n\nèˆ‰å€‹ä¾‹å­:\n\nâ—ä»»å‹™æ‘˜è¦ï¼š æŸ¥è©¢å°åŒ—æœªä¾†ä¸‰å¤©å¤©æ°£\nâ—åœ°é» / æ™‚é–“ï¼š å°åŒ—å¸‚ | 2025/10/15 - 2025/10/17\nâ—ä¸»è¦çµæœï¼š\n10/15 â˜€ï¸ æ™´ï¼Œæœ€é«˜30Â°Cï¼Œæœ€ä½24Â°C\n10/16 ğŸŒ¦ï¸ å±€éƒ¨é™£é›¨ï¼Œæœ€é«˜ 28Â°Cï¼Œæœ€ä½ 23Â°C\n10/17 â˜ï¸ å¤šé›²ï¼Œæœ€é«˜ 27Â°Cï¼Œæœ€ä½ 22Â°C\nâ—åˆ†æèˆ‡å»ºè­°ï¼š æ˜å¾Œå¤©æœ‰é™é›¨æ©Ÿç‡ï¼Œå»ºè­°å¤–å‡ºæ”œå¸¶é›¨å…·ã€‚\nâ—å¾ŒçºŒå‹•ä½œï¼š æ˜¯å¦è¦ç‚ºä½ æ–°å¢ã€Œæ˜å¤©æé†’å¸¶å‚˜ã€ï¼Ÿ\n\n\nè‹¥ä»»å‹™èˆ‡è¨˜å¸³ç›¸é—œï¼Œä½¿ç”¨Accounting Toolç´€éŒ„ä½¿ç”¨è€…æ”¶æ”¯ï¼Œç•¶ä½¿ç”¨è€…è¦æ±‚è¨˜å¸³æ™‚å¿…é ˆä½¿ç”¨æ­¤å·¥å…·ï¼Œä½¿ç”¨è€…éœ€è¦æä¾›èŠ±è²»æè¿°åŠé‡‘é¡ï¼Œæ—¥æœŸè‡ªå‹•è¨˜éŒ„ç•¶å‰æ—¥æœŸ(YYYY/MM/DD)ã€‚ç¾åœ¨çš„æ™‚é–“æ˜¯:{{ $json.currentDate }}\n\nAccounting Toolä½¿ç”¨ç¯„ä¾‹:\næ—¥æœŸæ™‚é–“:2025/04/09\nèŠ±è²»æè¿°:æ‰‹éŒ¶\né‡‘é¡ï¼š100\n\n\nè‹¥ä»»å‹™èˆ‡å»ºç«‹è¡Œäº‹æ›†äº‹ä»¶ç›¸é—œï¼Œä½¿ç”¨Create an event in Google Calendarç´€éŒ„äº‹ä»¶ï¼Œä½¿ç”¨æ­¤å·¥å…·æ™‚å¿…é ˆå¡«å…¥äº‹ä»¶æ‘˜è¦(summary)ã€‚ç¾åœ¨çš„æ™‚é–“æ˜¯:{{ $json.currentDate }}\n\nGoogle Calendarä½¿ç”¨ç¯„ä¾‹:\nä½¿ç”¨è€…è¼¸å…¥:æ˜å¤©æ—©ä¸Š9é»~10é»äº¤å¤§æœ‰é‡è¦æœƒè­°\n\nâ—æ‘˜è¦(summary):é‡è¦æœƒè­°\nâ—åœ°é» / æ™‚é–“: äº¤å¤§/9:00AM~10:00AM\nâ—ä¸»è¦çµæœ: ç´€éŒ„æ˜å¤©9:00AM~10:00AMäº¤å¤§æœ‰é‡è¦æœƒè­°\nâ—åˆ†æèˆ‡å»ºè­°ï¼š æ ¹æ“šäº‹ä»¶å…§å®¹ï¼Œæä¾›æœ‰ç”¨çš„èƒŒæ™¯æ¨è«–æˆ–å»ºè­°ï¼ˆä¾‹å¦‚äº¤é€šã€æº–å‚™äº‹é …ã€æé†’ç­‰ï¼‰\nâ—å¾ŒçºŒå‹•ä½œï¼š æ ¹æ“šäº‹ä»¶å…§å®¹ï¼Œçµ¦å‡ºä¸‹ä¸€æ­¥å¯èƒ½è¦åŸ·è¡Œçš„å‹•ä½œï¼ˆä¾‹å¦‚å»ºç«‹æé†’ã€å¯„ä¿¡é€šçŸ¥ã€é ç´„å ´åœ°ç­‰\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -544,
        -112
      ],
      "id": "21678e5c-790d-4f60-a73a-ffdf6445f24a",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "operation": "5DayForecast",
        "cityName": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('City', `åŸå¸‚åç¨±è½‰æˆè‹±æ–‡`, 'string') }}",
        "language": "=zh_tw"
      },
      "type": "n8n-nodes-base.openWeatherMapTool",
      "typeVersion": 1,
      "position": [
        -464,
        128
      ],
      "id": "874113ed-78e2-44ff-ada0-26be78e1eb6b",
      "name": "OpenWeatherMap",
      "credentials": {
        "openWeatherMapApi": {
          "id": "CoiQkOwNShjY9CgD",
          "name": "OpenWeatherMap account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -720,
        128
      ],
      "id": "361114ae-ad29-4f44-9b7b-7f3181c345b1",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "nh3r0m3ReElKVrEA",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "sendTo": "windspeak122@gmail.com",
        "subject": "=n8næ¸¬è©¦ä¿¡ä»¶",
        "message": "={{ $json.output.replace(/\\n/g, '<br>') }}",
        "options": {}
      },
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.1,
      "position": [
        224,
        -208
      ],
      "id": "957d400f-9786-4b81-8d9a-c149ce4e4294",
      "name": "Send a message",
      "webhookId": "7a10e6f9-c492-4912-b7f0-9bb749334b5c",
      "executeOnce": false,
      "alwaysOutputData": false,
      "notesInFlow": false,
      "credentials": {
        "gmailOAuth2": {
          "id": "KRySO29gHZ5QRQV1",
          "name": "Gmail account"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $json.user_message }}\n{{ $json.body.events[0].message.id }}"
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        -592,
        128
      ],
      "id": "c0dfe468-79a5-4b6a-9a24-6117155f3ba4",
      "name": "Simple Memory",
      "disabled": true
    },
    {
      "parameters": {
        "descriptionType": "manual",
        "toolDescription": "æ¯æ—¥è¨˜å¸³å·¥å…·",
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1jHR1AY7AZG4X7_T8hUAxsplI2a1JxQWf0oJY5I20EU4",
          "mode": "list",
          "cachedResultName": "n8nè¨˜å¸³è¡¨",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1jHR1AY7AZG4X7_T8hUAxsplI2a1JxQWf0oJY5I20EU4/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "2025",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1jHR1AY7AZG4X7_T8hUAxsplI2a1JxQWf0oJY5I20EU4/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "date": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('date', ``, 'string') }}",
            "description": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('description', ``, 'string') }}",
            "amount": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('amount', ``, 'string') }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "date",
              "displayName": "date",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "description",
              "displayName": "description",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "amount",
              "displayName": "amount",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheetsTool",
      "typeVersion": 4.7,
      "position": [
        -336,
        128
      ],
      "id": "51cfa0a2-fc84-420b-8321-1df7b2ba44d0",
      "name": "Accounting Tool",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "EQ8HZOnct5QMxWlB",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "options": {
          "includeInputFields": true,
          "timezone": "Asia/Taipei"
        }
      },
      "type": "n8n-nodes-base.dateTime",
      "typeVersion": 2,
      "position": [
        -960,
        -112
      ],
      "id": "ff073560-963c-47ae-86a4-a06d522a3d0b",
      "name": "Date & Time"
    },
    {
      "parameters": {
        "mode": "markdownToHtml",
        "markdown": "={{ $json.output }}",
        "options": {}
      },
      "type": "n8n-nodes-base.markdown",
      "typeVersion": 1,
      "position": [
        0,
        -208
      ],
      "id": "3a56bc65-aafb-4de4-8838-379082474cc0",
      "name": "Convert Response to an Email-Friendly Format",
      "disabled": true
    },
    {
      "parameters": {
        "calendar": {
          "__rl": true,
          "value": "bbcd4879263649e2bf2195a6ab2fc946db7c255e2f630792173697bc5a363686@group.calendar.google.com",
          "mode": "list",
          "cachedResultName": "n8nt-est"
        },
        "start": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Start', ``, 'string') }}",
        "end": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('End', ``, 'string') }}",
        "additionalFields": {
          "summary": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Summary', ``, 'string') }}"
        }
      },
      "type": "n8n-nodes-base.googleCalendarTool",
      "typeVersion": 1.3,
      "position": [
        -208,
        128
      ],
      "id": "cf83892e-be09-41ce-b733-19267274ee04",
      "name": "Create an event in Google Calendar",
      "credentials": {
        "googleCalendarOAuth2Api": {
          "id": "NWcLElzam9R9NSpA",
          "name": "Google Calendar account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "4948e8f3-8f71-49b0-bf97-d52028841e21",
              "name": "userId",
              "value": "={{ $json.body.events[0].source.userId }}",
              "type": "string"
            },
            {
              "id": "9dc645d5-9662-4cba-8192-6ed27afdbe65",
              "name": "user_message",
              "value": "={{ $json.usrsay }}",
              "type": "string"
            },
            {
              "id": "fe82b024-ac98-441a-88c9-5b86da3a36d2",
              "name": "replyToken",
              "value": "={{ $json.body.events[0].replyToken }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1168,
        -112
      ],
      "id": "66eb0dde-bd35-4257-a994-e17a5acd1113",
      "name": "æ•´ç†å‰å€‹ç¯€é»è¼¸å‡º"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.line.me/v2/bot/message/reply",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpBearerAuth",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n    \"replyToken\": \"{{$('Webhook_txt_in').item.json.body.events[0].replyToken }}\",\n    \"messages\":[\n        {\n            \"type\":\"text\",\n            \"text\":\"{{ $json.output.replaceAll(\"\\n\",\"\\\\n\") }}\"\n        }\n    ]\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        224,
        -16
      ],
      "id": "50b9888e-5a7b-4bd5-8104-f9ef158ca0cc",
      "name": "HTTP Request1",
      "credentials": {
        "httpBearerAuth": {
          "id": "9fiSUdmcvgObo9Gw",
          "name": "Bearer Auth (Line OA)"
        }
      },
      "disabled": true
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "cb1ea6a4-ae63-4b5a-99e6-e47658ce6a27",
              "name": "output",
              "value": "={{ $json.output }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        0,
        -16
      ],
      "id": "07e337dc-3501-48ac-9b69-d6f4ba16381e",
      "name": "Edit Fields",
      "disabled": true
    },
    {
      "parameters": {
        "workflowInputs": {
          "values": [
            {
              "name": "usrsay"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "typeVersion": 1.1,
      "position": [
        -1360,
        -112
      ],
      "id": "464fc225-8bf5-4e84-b642-27c22085bf84",
      "name": "When Executed by Another Workflow"
    }
  ],
  "pinData": {},
  "connections": {
    "OpenWeatherMap": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Convert Response to an Email-Friendly Format",
            "type": "main",
            "index": 0
          },
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Accounting Tool": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Date & Time": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Convert Response to an Email-Friendly Format": {
      "main": [
        [
          {
            "node": "Send a message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create an event in Google Calendar": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "æ•´ç†å‰å€‹ç¯€é»è¼¸å‡º": {
      "main": [
        [
          {
            "node": "Date & Time",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "HTTP Request1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When Executed by Another Workflow": {
      "main": [
        [
          {
            "node": "æ•´ç†å‰å€‹ç¯€é»è¼¸å‡º",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1",
    "timezone": "Asia/Taipei",
    "callerPolicy": "workflowsFromSameOwner",
    "availableInMCP": false
  },
  "versionId": "3866f63f-8dd9-46e4-92a3-a7194126d4d5",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "5ca967fb203e82fb04c6a790b96613026cc274f66ac50c77ca500a6f991cdb70"
  },
  "id": "U2QLi8j6Mo6KozH6",
  "tags": []
}